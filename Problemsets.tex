\documentclass[11pt,a4paper]{article}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{amsmath, enumerate, multicol}

\newcommand\sumone{\sum_{n=1}^{\infty}}
\newcommand\sumzero{\sum_{n=0}^{\infty}}
\newcommand\sumtwo{\sum_{n=2}^{\infty}}

\renewcommand{\baselinestretch}{1.3}
\usepackage[width=16.00cm, height=24.00cm]{geometry}
\author{Nith Kosal}
\title{Problem Sets with R Programming}
\begin{document}
	\maketitle
	
\subsection*{Problem 1: Vectors}	

\begin{enumerate}
	\item Create the vectors: 
	\begin{enumerate}
		\item (1, 2, 3, ..., 29, 30)
		\item (30, 29, 28, ..., 2, 1)
		\item (1, 2, 3, ..., 19, 20, 19, 18, ..., 2, 1)
		\item (44, 66, 33) and assign it to the name \texttt{futureforum}. 
		For parts (e), (f) and (g) look at the help for the function \texttt{rep}.
		
		\item (44, 66, 33, 44, 66, 33, ..., 44, 66, 33) where there are 20 occurrences of 44.
		\item (44, 66, 33, 44, 66, 33, ..., 44, 66, 33, 44) where there are 11 occurrences of 44, 10 occurrences of 66 and 10 occurrences of 33.
		\item (44, 44, ..., 44, 66, 66, ..., 66, 33, 33, ..., 33) where there are 10 occurrences of 44, 20 occurrences of 44, 20 occurrences of 66, 30 occurrences of 33. 
		
	\end{enumerate}
    \item Create a vector of the value of $e^{x}cos(x)$ at $x$ = 3, 3.1, 3.2, ..., 7.

    \item Create the following vectors: 
	\setlength\columnsep{0cm}
	
	\begin{multicols}{2}
		\begin{enumerate}
			\everymath{\displaystyle}  
			\item $(0.1^{3}0.2^{1}, 0.1^{6}0.2^{3}, ..., 0.1^{37}0.2^{32})$
			\item $(2, \dfrac{2^{2}}{4}, \dfrac{2^{3}}{4}, ..., \dfrac{2^{26}}{26})$ 
		\end{enumerate}
	\end{multicols}
	
	\item Calculate the following: 
	\setlength\columnsep{0cm}
	
	\begin{multicols}{2}
		\begin{enumerate}
			\everymath{\displaystyle}  
			\item $\sum_{n=1}^{200}(i^{3}+4i^{2})$
			\item $\sum_{n=1}^{25}(\dfrac{2^{i}}{i} + \dfrac{3^{i}}{i^{2}})$ 
		\end{enumerate}
	\end{multicols}
	
	\item Use the function \texttt{paste} to create the following character vectors of length 34. 
	\begin{enumerate}
		\item \texttt{("Cambodia 1", "Cambodia 2", ..., "Cambodia 34")}. Note that there is a single space between \texttt{Cambodia} and the number following. 
		\item \texttt{("ffteam1", "ffteam2", ..., "ffteam29")}. Note that there are is no space between \texttt{ttteam} and the number following.  
	\end{enumerate}

	\item Execute the following lines which create two vectors of random integers which are chosen with replacement from the integers 0, 1, ..., 999. Both vector have length 244. 
	
	\texttt{set.seed(50) \\
	xVec <- sample(0:999, 250, replace=T)\\
	yVec <- sample(0:999, 250, replace=T)}

	Suppose $x = (x_{1}, x_{2}, ..., x_{n})$ denotes the vector \texttt{xVec} and $y = (y_{1}, y_{2}, ..., y_{n})$ denotes the vector \texttt{yVec}.
	
	\begin{enumerate}
		\item Create the vector $(y_{2}-x_{1}, ..., y_{n}-x_{n-1})$
		\item Create the vector $\left ( \dfrac{sin(y_{1})}{cos(x_{2})}, \dfrac{sin(y_{2})}{cos(x_{3})}, ..., \dfrac{sin(y_{n-1})}{cos(x_{n})}\right )$
		\item Create the vector $(x_{1} + 2x_{2} - x_{3}, x_{2} + 2x_{3} - x{4}, ..., x_{n-2} +2x_{n-1} - x_{n})$
		\everymath{\displaystyle}  
		\item Calculate $\sum_{i=1}^{n-1} \dfrac{e^{-x_{i+1}}}{x_{i} + 10}$
	\end{enumerate}

	\item Use the vectors \texttt{xVec} and \texttt{yVec} created in the previous question and the functions \texttt{sort}, \texttt{order}, \texttt{mean}, \texttt{sqrt}, \texttt{sum} and \texttt{abs}. 
	
	\begin{enumerate}
		\item Pick out the values in \texttt{yVec} which are >400.
		\item What are the index positions in \texttt{yVec} of the values which are >400? 
		\item What are the values in \texttt{xVec} which correspond to the values in \texttt{yVec} which are >400? (By correspond, we mean at the same index positions.)
		\item Create the vector $(|x_{1} - \bar{X}|^{1/2}, |x_{2} - \bar{X}|^{1/2}, ..., |x_{n} - \bar{X}|^{1/2})$ where $\bar{X}$ denotes the mean of the vector $X = (x_{1}, x_{2}, ..., x_{n})$. 
		
		\item How many values in \texttt{yVec} are within 200 of the maximum value of the terms in \texttt{yVec}?
		
		\item How many numbers in xVec are divisible by 2? (Note that the modulo operator is denoted \texttt{\%\%}.)
		
		\item Sort the numbers in the vector \texttt{xVec} in the order of increasing values in \texttt{yVec}.
		
		\item Pick out the elements in \texttt{yVec} at index positions 1, 4, 7, 10, 13, ...
	
	\end{enumerate}

	\item By using the function \texttt{cumprod} or otherwise, calculate
 
	$1 + \dfrac{2}{3} + \dfrac{24}{35} + \dfrac{246}{357} + ... + (\dfrac{2}{3} \dfrac{4}{5} ... \dfrac{38}{39})$ 
\end{enumerate}
%------------------------------------------------------------------

\subsection*{Problem 2: Matrices}

	\begin{enumerate}
		\item Suppose 
		$A = \begin{bmatrix}
			1 & 2 & 3\\ 
			5 & 2 & 6\\ 
			-2 & -4 & 8
		\end{bmatrix}$
		\begin{enumerate}
			\item Check that $A^{3}=0$ where $0$ is a $3\times3$ matrix with entry equal to 0. 
			\item Replace the third column of $A$ by the sum of the second and third columns. 
		\end{enumerate}
	
		\item Create the following matrix $B$ with 15 rows: 
		$B = \begin{bmatrix}
			20 & -20 & 20\\ 
			20 & -20 & 20\\ 
			\cdots & \cdots & \cdots \\
			20 & -20 & 20
		\end{bmatrix}$
	
	And than, Calculate the $3\times3$ matrix $B^{T}B$. Note: Look at the help for \texttt{crossprod}. 
	
		\item Create a $6\times6$ matrix \texttt{matA} with every equal to 0. Check what the functions \texttt{row} and \texttt{col} return when applied to \texttt{matA}. Hence create the $6\times6$ matrix: 
		$$\begin{bmatrix}
			0 & 1 & 0 & 0 & 0 & 0 \\
			1 & 0 & 1 & 0 & 0 & 0 \\
			0 & 1 & 0 & 1 & 0 & 0 \\
			0 & 0 & 1 & 0 & 1 & 0 \\
			0 & 0 & 0 & 1 & 0 & 1 \\
			0 & 0 & 0 & 0 & 1 & 0 
		\end{bmatrix}$$
		
		\item Look at the help for the function \texttt{outer}. Hence create the following patterned matrix:
		$$\begin{pmatrix}
			0 & 1 & 2 & 3 & 4\\ 
			1 & 2 & 3 & 4 & 5\\ 
			2 & 3 & 4 & 5 & 6\\ 
			3 & 4 & 5 & 6 & 7\\ 
			4 & 5 & 6 & 7 & 8
		\end{pmatrix}$$
	
	\item Create the following patterned matrices. In each case, your solution should make use of the special form of the matrix --- this means that the solution should easily generalize to creating a larger matrix with the same structure and should not involve typing in all the entries in the matrix. 
	\setlength\columnsep{0cm}
	
	\begin{multicols}{2}
		\begin{enumerate}
			\everymath{\displaystyle}  
			\item $\begin{pmatrix}
				0 & 1 & 2 & 3 & 4 \\
				1 & 2 & 3 & 4 & 0 \\ 
				2 & 3 & 4 & 0 & 1 \\
				3 & 4 & 0 & 1 & 2 \\ 
				4 & 0 & 1 & 2 & 3
			\end{pmatrix}$
			
			\item $\begin{pmatrix}
				0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9\\ 
				1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 0\\ 
				\vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots\\ 
				8 & 9 & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7\\ 
				9 & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8
			\end{pmatrix}$
			
			\item $\begin{pmatrix}
				0 & 8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 \\ 
				1 & 0 & 8 & 7 & 6 & 5 & 4 & 3 & 2 \\ 
				2 & 1 & 0 & 8 & 7 & 6 & 5 & 4 & 3 \\ 
				3 & 2 & 1 & 0 & 8 & 7 & 6 & 5 & 4 \\ 
				4 & 3 & 2 & 1 & 0 & 8 & 7 & 6 & 5 \\
				5 & 4 & 3 & 2 & 1 & 0 & 8 & 7 & 6 \\
				6 & 5 & 4 & 3 & 2 & 1 & 0 & 8 & 7 \\
				7 & 6 & 5 & 4 & 3 & 2 & 1 & 0 & 8 \\
				8 & 7 & 6 & 5 & 4 & 3 & 2 & 1 & 0
			\end{pmatrix}$
				\end{enumerate}
	\end{multicols}
	
	\item Solve the following system of linear equations in five unknowns
	$$x_{1} + 2x_{2} + 3x_{3} + 4x_{4} + 5x_{5} = 7$$
	$$2x_{1} + x_{2} + 2x_{3} + 3x_{4} + 4x_{5} = -1$$
	$$3x_{1} + 2x_{2} + x_{3} + 2x_{4} + 3x_{5} = -3$$
	$$4x_{1} + 3x_{2} + 2x_{3} + x_{4} + 2x_{5} = 5$$
	$$5x_{1} + 4x_{2} + 3x_{3} + 2x_{4} + x_{5} = 17$$
	
	by considering an appropriate matrix equation $AX = y$.
	Make use of the special form of the matrix $A$. The method used for the solution should easily generalize to a larger set of equations where the matrix $A$ has the same structure; hence the solution should not involve typing in every number of $A$.
	\end{enumerate}	
%------------------------------------------------------------------

\subsection*{Problem 3}

\begin{enumerate}
	\item The following table gives the size of the floor area (ha) and the price (\$000), for 15 houses sold in the Canberra (Australia) suburb of Aranda in 1999.
	$$\begin{tabular}{cols}
		& area & sale.price \\
		1 & 694 & 192.0 \\
		2 & 905 & 215.0 \\
		3 & 802 & 215.0 \\
		4 & 1366 & 274.0 \\
		5 & 716 & 112.7 \\
		6 & 963 & 185.0 \\
		7 & 821 & 212.0 \\
		8 & 714 & 220.0 \\
		9 & 1018 & 276.0 \\
		10 & 887 & 260.0 \\
		11 & 790 & 221.5 \\ 
		12 & 696 & 255.0 \\ 
		13 & 771 & 260.0 \\ 
		14 & 1006 & 293.0 \\
		15 & 1191 & 375.0
	\end{tabular}$$
	Type these data into a data frame with column names \texttt{area} and \texttt{sale.price}.

	\begin{enumerate}
		\item Plot \texttt{sale.price} versus \texttt{area}.
		\item Use the \texttt{hist()} command to plot a histogram of the sale prices. 
		\item Repeat (a) and (b) after taking logarithms of sale prices. 
	\end{enumerate}

	\item The \texttt{orings} data frame (DAAG package) gives data on the damage that had occurred in US space shuttle launches prior to the disastrous Challenger launch of 28 January 1986. The observations in rows 1, 2, 4,
	11, 13, and 18 were included in the pre-launch charts used in deciding whether to proceed with the launch, while remaining rows were omitted.	
	Create a new data frame by extracting these rows from \texttt{orings}, and plot \texttt{total} incidents against \texttt{temperature} for this new data frame. Obtain a similar plot for the full data set.
	
	\item For the data frame \texttt{possum} (DAAG package)
	\begin{enumerate}
		\item Use the function \texttt{str()} to get information on each of the columns.
		\item Using the function \texttt{complete.cases()}, determine the rows in which one or more values is missing. Print those rows. In which columns do the missing values appear?
	\end{enumerate}
	 
	 \item For the data frame \texttt{ais} (DAAG package)
	 \begin{enumerate}
	 	\item Use the function \texttt{str()} to get information on each of the columns. Determine whether any of the columns hold missing values.
	 	\item Make a table that shows the numbers of males and females for each different sport. In which sports is there a large imbalance (e.g., by a factor of more than 2:1) in the numbers of the two sexes?
	 \end{enumerate}
	 
	 \item Create a table that gives, for each species represented in the data frame \texttt{rainforest} (DAAG package), the number of values of branch that are NAs, and the total number of cases.
	 [Hint: Use either \texttt{!is.na()} or \texttt{complete.cases()} to identify NAs.]
	 
\end{enumerate}

%------------------------------------------------------------------

%------------------------------------------------------------------

\subsection*{Problem 4: Data transformations}
\textbf{Filter rows with \texttt{filter()}}

\begin{enumerate}
	\item Use \texttt{flights} data frame in the \texttt{nycflights13} library and use \texttt{tidyverse} package. Find all flights that:
	
	\begin{enumerate}
		\item Had an arrival delay of two or more hours. To do so, you should find the variable that denote as an arrival delay.
		\item Show the flights (\texttt{dest} variable) that flew to Houston where the destination is either \texttt{``IAH''} or \texttt{``HOU''}.
		\item Were operated by United, American, or Delta.
		\item Departed in summer (July, August, and September).
		\item Arrived more than two hours late, but didn't leave late.
		\item Were delayed by at least an hour, but made up over 30 minutes in flight. 
		\item Departed between midnight and 6am (inclusive).
	\end{enumerate}
		
	\item In the \texttt{month} variable of the \texttt{flights} data frame, please show departed in summer (month $>= 7$ \& month $<= 10$) using the \texttt{between()} function.	
	
	\item How many flights have a missing \texttt{dep\_time} of the \texttt{flights} data frame? What other variables are missing? What might these rows represent?
	
	\item Why is \texttt{NA\textasciicircum 0} not missing? Why is \texttt{NA | TRUE} not missing? Why is \texttt{FALSE \& NA} not missing? Can you figure out the general rule? (\texttt{NA * 0} is a tricky counterexample!)

\end{enumerate}
%------------------------------------------------------------------
\noindent \textbf{Arrange rows with \texttt{arrange()}}

\begin{enumerate}
	\item Continuing the \texttt{flights} data frame, how could you use \texttt{arrange()} to sort all missing values to the start? (Hint: use \texttt{is.na()}).
	
	\item Sort \texttt{flights} to find the most delayed flights. Find the flights that left earliest.
	
	\item Sort \texttt{flights} to find the fastest (the highest speed) flights.
	
	\item Which flights traveled the farthest? Which traveled the shortest?

\end{enumerate}
%------------------------------------------------------------------

\noindent \textbf{Select columns with \texttt{select()}}

\begin{enumerate}
	\item Please select \texttt{dep\_time}, \texttt{dep\_delay}, \texttt{arr\_time}, and \texttt{arr\_delay} from \texttt{flights} data frame.
	
	\item What happens if you include the name of a variable multiple times in a \texttt{select()} call?
	
	\item What does the \texttt{one\_of()} function do? Why might it be helpful in conjunction with this vector?
	
	\texttt{vars <- c(``year'', ``month'', ``day'', ``dep\_delay'', ``arr\_delay'')}
	
	\item Does the result of running the following code surprise you? How do the select helpers deal with case by default? How can you change that default?
	
	\texttt{select(flights, contains(``TIME''))}
	
\end{enumerate}
%------------------------------------------------------------------

\noindent \textbf{Add new variables with \texttt{mutate()}}

\begin{enumerate}
	\item Currently \texttt{dep\_time} and \texttt{sched\_dep\_time} are convenient to look at, but hard to compute with because they're not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.
	
	\item Compare \texttt{air\_time} with \texttt{arr\_time - dep\_time}. What do you expect to see? What do you see? What do you need to do to fix it?
	
	\item Compare \texttt{dep\_time}, \texttt{sched\_dep\_time}, and \texttt{dep\_delay}. How would you expect those three numbers to be related?
	
	\item Find the 10 most delayed flights using a ranking function. How do you want to handle ties? Carefully read the documentation for \texttt{min\_rank()}.
	
	\item What does \texttt{1:3 + 1:10} return? Why?
	
	\item What trigonometric functions does R provide?
	
\end{enumerate}
%------------------------------------------------------------------

\noindent \textbf{Grouped summaries with \texttt{summarise()}}

\begin{enumerate}
	\item Come up with another approach that will give you the same output as \texttt{not\_cancelled \%>\% count(dest)} and \texttt{not\_cancelled \%>\% count(tailnum, wt = distance)} (without using \texttt{count()}).
	
	\item Our definition of canceled flights (\texttt{is.na(dep\_delay) | is.na(arr\_delay)}) is slightly sub-optimal. Why? Which is the most important column?
	
	\item Look at the number of canceled flights per day. Is there a pattern? Is the proportion of canceled flights related to the average delay?
	
	\item Which carrier has the worst delays? Challenge: can you disentangle the effects of bad airports vs. bad carriers? Why/why not? (Hint: think about flights \texttt{\%>\% group\_by(carrier, dest) \%>\% summarise(n())})
	
	\item What does the sort argument to \texttt{count()} do? When might you use it?
	
\end{enumerate}
%------------------------------------------------------------------

\noindent \textbf{Grouped mutates (and filters)}

\begin{enumerate}
	\item Refer back to the lists of useful mutate and filtering functions. Describe how each operation changes when you combine it with grouping.
	
	\item What time of day should you fly if you want to avoid delays as much as possible?
	
	\item For each destination, compute the total minutes of delay. For each flight, compute the proportion of the total delay for its destination.
	
	\item Delays are typically temporally correlated: even once the problem that caused the initial delay has been resolved, later flights are delayed to allow earlier flights to leave. Using \texttt{lag()} explore how the delay of a flight is related to the delay of the immediately preceding flight.
	
	\item Look at each destination. Can you find flights that are suspiciously fast? (i.e. flights that represent a potential data entry error). Compute the air time of a flight relative to the shortest flight to that destination. Which flights were most delayed in the air?
	
	\item Find all destinations that are flown by at least two carriers. Use that information to rank the carriers.
	
	\item For each plane, count the number of flights before the first delay of greater than 1 hour.
	
	
\end{enumerate}
%------------------------------------------------------------------
\end{document}